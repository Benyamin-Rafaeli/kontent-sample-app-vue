dist:
  - trusty
language:
  - node_js
node_js:
  - stable
#addons:
#  chrome: stable
before_script:
  - npm install

cache:
  directories:
    - ~/.npm
    - ~/.cache
  override:
    - npm ci
    - npm run cy:verify

defaults: &defaults
  script:
    - npm run serve & npm test
    - kill $(jobs -p) || true
jobs:
  include:
#    ## we have multiple jobs to execute using just a single stage
#    ## but we can pass group name via environment variable to Cypress test runner
#    - stage: test
#      env:
#        - STAGE_NAME="1x-electron on Travis CI"
#      <<: *defaults
    ## run tests in parallel by including several test jobs with same name variable
    - stage: test
      env:
        - STAGE_NAME="4x-electron on Travis CI"
      <<: *defaults
    - stage: test
      env:
        - STAGE_NAME="4x-electron on Travis CI"
      <<: *defaults
    - stage: test
      env:
        - STAGE_NAME="4x-electron on Travis CI"
      <<: *defaults
    - stage: test
      env:
        - STAGE_NAME="4x-electron on Travis CI"
      <<: *defaults


